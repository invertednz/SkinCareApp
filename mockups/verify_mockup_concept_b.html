<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Verify – Concept B: Sentence Builder</title>
  <style>
    :root {
      --bg: #fafafa;
      --card: #ffffff;
      --muted: #6b7280;
      --text: #111827;
      --border: #e5e7eb;
      --accent: #2563eb;
      --danger: #ef4444;
      --radius: 12px;
      --shadow: 0 6px 24px rgba(0,0,0,0.06);
    }
    * { box-sizing: border-box; font-family: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; }
    body { margin: 0; background: var(--bg); color: var(--text); padding: 24px; }
    .panel { max-width: 820px; margin: 0 auto; background: var(--card); border: 1px solid var(--border); border-radius: var(--radius); box-shadow: var(--shadow); }
    .panel-header { display:flex; align-items:center; gap:12px; padding: 16px 20px; border-bottom: 1px solid var(--border); background: #f7f7f8; border-top-left-radius: var(--radius); border-top-right-radius: var(--radius); }
    .panel-header h2 { margin: 0; font-size: 16px; font-weight: 650; }
    .muted { color: var(--muted); font-size: 12px; }
    .content { padding: 16px 20px; display: grid; gap: 16px; }
    .row { display:flex; flex-wrap:wrap; align-items:center; gap:8px; }
    .token { display:inline-flex; align-items:center; gap:8px; background:#fff; border:1px solid var(--border); padding:8px 10px; border-radius:10px; }
    .token select, .token input { border:none; outline:none; font-size:14px; background:transparent; min-width: 60px; }
    .token input[type="text"] { min-width:180px; }
    .badge { padding:3px 8px; border-radius:999px; background:#eef2ff; color:#1d4ed8; font-weight:600; font-size:12px; border:1px solid #c7d2fe; }
    .divider { height:1px; background:var(--border); margin: 6px 0 0; }
    .stack { display:grid; gap:10px; }
    .footer { border-top: 1px solid var(--border); padding: 16px 20px; display:flex; justify-content: space-between; align-items:center; border-bottom-left-radius: var(--radius); border-bottom-right-radius: var(--radius); }
    .code { background:#0b1021; color:#e5e7eb; padding:12px; border-radius:10px; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; font-size:12px; overflow:auto; }
    .danger { background:#fff1f2; color:#b91c1c; border:1px solid #fecaca; padding:12px 16px; border-radius:10px; cursor:pointer; font-weight:600; }
    .add { border:1px dashed var(--border); background:#fff; border-radius:10px; padding:8px 10px; cursor:pointer; font-size:14px; }
    details { border:1px dashed var(--border); padding:10px 12px; border-radius:10px; background:#fff; }
    details summary { cursor:pointer; font-weight:600; }
    .disabled-row { opacity: 0.55; }
    .rotated { transform: rotate(180deg); }
  </style>
</head>
<body>
  <div class="panel">
    <div class="panel-header">
      <h2>Verify Parameters</h2>
      <span class="muted">Sentence builder – readable assertions</span>
    </div>
    <div class="content">
      <div class="stack">
        <div class="row">
          <span class="badge">1</span>
          <div class="stepActionCard false"><div class="locateInput false"><div class="relative"><p>Field label</p><div class="fieldInputGroup"><div class="flex items-center justify-start border border-[#c6c6c6] bg-white rounded-[5px] px-[15px] pr-[60px] h-[40px] w-full"></div><input name="fieldLabel" type="text" placeholder="Field label" class="hidden" value="Test Name"><div id="fieldOptions"><button class="cursor-pointer"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="15" height="15" color="#000000" fill="none"><path d="M16 4.5L15 4.5L12.6402 2.53349C12.2693 2.22445 11.7307 2.22445 11.3598 2.53349L9 4.5L5.5 4.5C4.94772 4.5 4.5 4.94772 4.5 5.5L4.5 9L2.53349 11.3598C2.22445 11.7307 2.22445 12.2693 2.53349 12.6402L4.5 15L4.5 18.5C4.5 19.0523 4.94772 19.5 5.5 19.5L9 19.5L11.3598 21.4665C11.7307 21.7756 12.2693 21.7756 12.6402 21.4665L15 19.5H18.5C19.0523 19.5 19.5 19.0523 19.5 18.5L19.5 15L21.4665 12.6402C21.7756 12.2693 21.7756 11.7307 21.4665 11.3598L20 9.6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path> <path d="M9 11L12 14L21 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path> </svg></button><button class="cursor-pointer"><svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 24 24" fill="none" data-src="https://cdn.hugeicons.com/icons/magic-wand-01-stroke-rounded.svg" xmlns:xlink="http://www.w3.org/1999/xlink" role="img" color="#000000"><path d="M13.9258 12.7775L11.7775 10.6292C11.4847 10.3364 11.3383 10.19 11.1803 10.1117C10.8798 9.96277 10.527 9.96277 10.2264 10.1117C10.0685 10.19 9.92207 10.3364 9.62923 10.6292C9.33638 10.9221 9.18996 11.0685 9.11169 11.2264C8.96277 11.527 8.96277 11.8798 9.11169 12.1803C9.18996 12.3383 9.33638 12.4847 9.62923 12.7775L11.7775 14.9258M13.9258 12.7775L20.3708 19.2225C20.6636 19.5153 20.81 19.6617 20.8883 19.8197C21.0372 20.1202 21.0372 20.473 20.8883 20.7736C20.81 20.9315 20.6636 21.0779 20.3708 21.3708C20.0779 21.6636 19.9315 21.81 19.7736 21.8883C19.473 22.0372 19.1202 22.0372 18.8197 21.8883C18.6617 21.81 18.5153 21.6636 18.2225 21.3708L11.7775 14.9258M13.9258 12.7775L11.7775 14.9258" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M17 2L17.2948 2.7966C17.6813 3.84117 17.8746 4.36345 18.2556 4.74445C18.6366 5.12545 19.1588 5.31871 20.2034 5.70523L21 6L20.2034 6.29477C19.1588 6.68129 18.6366 6.87456 18.2556 7.25555C17.8746 7.63655 17.6813 8.15883 17.2948 9.2034L17 10L16.7052 9.2034C16.3187 8.15884 16.1254 7.63655 15.7444 7.25555C15.3634 6.87455 14.8412 6.68129 13.7966 6.29477L13 6L13.7966 5.70523C14.8412 5.31871 15.3634 5.12545 15.7444 4.74445C16.1254 4.36345 16.3187 3.84117 16.7052 2.7966L17 2Z" stroke="currentColor" stroke-width="1.5" stroke-linejoin="round"></path><path d="M6 4L6.22108 4.59745C6.51097 5.38087 6.65592 5.77259 6.94167 6.05834C7.22741 6.34408 7.61913 6.48903 8.40255 6.77892L9 7L8.40255 7.22108C7.61913 7.51097 7.22741 7.65592 6.94166 7.94167C6.65592 8.22741 6.51097 8.61913 6.22108 9.40255L6 10L5.77892 9.40255C5.48903 8.61913 5.34408 8.22741 5.05833 7.94167C4.77259 7.65592 4.38087 7.51097 3.59745 7.22108L3 7L3.59745 6.77892C4.38087 6.48903 4.77259 6.34408 5.05833 6.05833C5.34408 5.77259 5.48903 5.38087 5.77892 4.59745L6 4Z" stroke="currentColor" stroke-width="1.5" stroke-linejoin="round"></path></svg></button><span class="material-symbols-outlined cursor-pointer text-[15px]">tune</span></div></div><div class="absolute bg-white left-1/2 -translate-x-1/2 flex items-center justify-center mt-1"></div></div></div></div>
        </div>

        <div class="row">
          <span class="badge">2</span>
          <div class="relative">
            <p class="muted" style="margin:0 0 6px 0;">Visibility</p>
            <div class="token">
              <select id="visibilityNegation">
                <option>is</option>
                <option>is not</option>
              </select>
              <select id="visibilityAspect">
                <option>present</option>
                <option>visible</option>
                <option>enabled</option>
                <option>checked</option>
                <option>editable</option>
                <option>selected</option>
              </select>
            </div>
          </div>
        </div>

        <div class="row" id="verificationRow">
          <span class="badge">3</span>
          <div class="relative">
            <p class="muted" style="margin:0 0 6px 0;">Verification</p>
            <div class="token">
              <select aria-label="Truthiness">
                <option>should</option>
                <option>should not</option>
              </select>
              <select id="verificationType">
                <option>contain</option>
                <option>equal</option>
                <option>start with</option>
                <option>end with</option>
                <option>be less than</option>
                <option>be greater than</option>
                <option>match regex</option>
                <option>have dom attribute</option>
                <option>have css property</option>
              </select>
              <input type="text" placeholder="Value" />
              <label class="muted"></label>
            </div>
          </div>
        </div>

        <div class="flex items-center justify-between mx-auto" id="advancedToggle">
          <button class="cursor-pointer flex items-center gap-1 text-[14px]" type="button">
            Advanced section
            <span class="material-symbols-outlined transition-all ease-in-out duration-500" id="advancedIcon">keyboard_arrow_down</span>
          </button>
        </div>
        <div id="advancedSection" style="display:none;">
          <div class="row">
            <span class="badge">4</span>
            <div class="relative">
              <p class="muted" style="margin:0 0 6px 0;">Timeout</p>
              <div class="token">
                <span>after</span>
                <input type="number" value="15" style="width:72px" />
                <span>seconds</span>
              </div>
            </div>
          </div>

          <div class="row">
            <span class="badge">5</span>
            <div class="relative">
              <p class="muted" style="margin:0 0 6px 0;">Failure message</p>
              <div class="token">
                <input type="text" placeholder="Optional error message" />
              </div>
            </div>
          </div>

          <div class="row">
            <span class="badge">6</span>
            <div class="relative">
              <p class="muted" style="margin:0 0 6px 0;">Failure action</p>
              <div class="token">
                <label><input type="checkbox" /> continue on failure</label>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</body>
<script>
  (function() {
    const negation = document.getElementById('visibilityNegation');
    const aspect = document.getElementById('visibilityAspect');
    const verificationRow = document.getElementById('verificationRow');
    const advancedToggle = document.getElementById('advancedToggle');
    const advancedSection = document.getElementById('advancedSection');
    const advancedIcon = document.getElementById('advancedIcon');
    

    function setDisabled(disabled) {
      if (!verificationRow) return;
      const controls = verificationRow.querySelectorAll('select, input');
      controls.forEach(el => {
        // Keep the badge number enabled for screen readers; only disable inputs/selects
        if (el.tagName === 'SELECT' || (el.tagName === 'INPUT' && (el.type === 'text' || el.type === 'number' || el.type === 'checkbox'))) {
          el.disabled = disabled;
        }
      });
      verificationRow.classList.toggle('disabled-row', disabled);
      verificationRow.setAttribute('aria-disabled', String(disabled));
    }

    function update() {
      const isNot = negation && negation.value === 'is not';
      const asp = aspect ? aspect.value : '';
      // Disable verification when:
      // - Visibility is set to "is not present" or "is not visible" (no subject to verify)
      // - Visibility aspect is "checked" (binary state already conveys the assertion)
      const block = (isNot && (asp === 'present' || asp === 'visible')) || (asp === 'checked');
      setDisabled(block);
    }

    if (negation) negation.addEventListener('change', update);
    if (aspect) aspect.addEventListener('change', update);
    // Initialize on DOM ready
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', update);
    } else {
      update();
    }

    // Advanced section toggle
    if (advancedToggle && advancedSection && advancedIcon) {
      const btn = advancedToggle.querySelector('button');
      if (btn) {
        btn.setAttribute('aria-expanded', 'false');
        btn.addEventListener('click', () => {
          const isHidden = advancedSection.style.display === 'none' || advancedSection.style.display === '';
          advancedSection.style.display = isHidden ? 'block' : 'none';
          btn.setAttribute('aria-expanded', isHidden ? 'true' : 'false');
          advancedIcon.classList.toggle('rotated', isHidden);
        });
      }
    }

    // No additional behavior needed for verification type; it's a scrollable list now.
  })();
</script>
</html>
